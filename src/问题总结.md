# Raft
## Raft缺点：
leader为数据流的中心，容易出现网络I/O瓶颈
## Raft优化
1. 日志回退发送优化，回退一格、一个term、直接从commit发送；需要平衡I/O和性能
2. 像zookeeper一样，可以将读请求发送给任意服务器，客户端发送时携带ReadIndex，小于这个Index则不回复，实现客户端级别的一致性。
3. follower落后太多，而leader已经没有对应索引的日志时需要发送快照，对于运行了很久的数据库，快照可能非常大，因此不能用一个RPC发送快照，我们可以用RPC只发送快照的元数据，新开一个TCP连接并行发送实际数据，实际数据也分成小份的chunk逐个发送，使网络I/O流量更加平稳
4. follower的commit回复合并在一起回复跟TCP一样，或者leader心跳包合并即等待一会将客户端的命令批处理发送给follower，不过设计到选举定时时间的修改，细节很多，很难保证正确性。